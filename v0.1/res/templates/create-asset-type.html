{% extends "base.html" %}

<!-- Extend Block 'head' in base.html -->
{% block head %}

{% endblock %}

<!-- Extend Block 'body' in base.html -->
{% block body %}
<div class="container">
    <div class="row" style="margin-top:20px">
        <div class="col-md-12">
            <h4>Create new AssetType</h4>
        </div>
    </div>

    <hr/>

    <!-- TODO: do this in javascript -->

    <div class="row" style="margin-top: 20px">
        <form id="create-asset-type-form" class="col" action="/asset-type/create" method="post">

            <!-- INPUT FOR ASSET TYPE ASSET_NAME -->

            <input hidden class="form-control" name="ownderId" value="{{ owner_id|int }}">

            <div class="form-group row">
                <label for="assetName" class="col-md-2 col-form-label">Asset Name:</label>
                <div class="col-md-10">
                    <input type="text" class="form-control" name="assetName" id="assetName">
                </div>
            </div>


            <!-- SELECT SUPER TYPE THE NEW TYPE EXTENDS-->

            <div class="form-group row">
                <label for="superType" class="col-md-2 col-form-label">Extends Asset Type:</label>
                <div class="col-md-10">
                    <select class="form-control custom-select"
                            name="superType" id="superType"
                            onchange="">

                        <option value="0" selected>...</option>

                        {% for asset_type_id in asset_types %}
                        <option value="{{ asset_type_id }}">
                            {{ asset_types[asset_type_id].asset_name }}
                        </option>
                        {% endfor %}

                    </select>
                </div>
            </div>


            <script>
                function createTypeSettingsRow() {

                    let settingsRow = document.createElement('div');
                    settingsRow.setAttribute('class', 'row');

                    let bookableSettingCol = document.createElement('div');
                    bookableSettingCol.setAttribute('class', 'col');
                    settingsRow.appendChild(bookableSettingCol);

                    let bookableSettingLabel = document.createElement('label');
                    bookableSettingLabel.setAttribute('for', 'bookable-type');
                    bookableSettingLabel.setAttribute('class', 'label');
                    bookableSettingLabel.textContent = 'Bookable Type:';
                    bookableSettingCol.appendChild(bookableSettingLabel);

                    let bookableSettingsInput = document.createElement('input');
                    bookableSettingsInput.setAttribute('type', 'checkbox');
                    bookableSettingsInput.setAttribute('name', 'bookable-type');
                    bookableSettingsInput.setAttribute('id', 'bookable-type');
                    bookableSettingsInput.style.marginLeft = '10px';
                    bookableSettingCol.appendChild(bookableSettingsInput);

                    document.getElementById('create-asset-type-form').appendChild(settingsRow);
                }

                createTypeSettingsRow();
            </script>

            <hr/>

            <!-- HEADER LINE -->

            <div class="row" style="margin-top: 10px">

                <div class="col-md-5 offset-md-1">
                    <span style="padding-left: 20px">Column Name</span>
                </div>

                <div class="col-md-3 offset-md-1">
                    <span>Datatype</span>
                </div>

                <div class="col-md-1">
                    <span style="padding-left: 60px">Required</span>
                </div>

            </div>

            <!-- COLUMN INPUTS -->

            <div id="column-list"></div>

            <button class="btn btn-block btn-secondary" type="button" onclick="addColumn()">
                <i class="fas fa-plus"></i>
            </button>

            <hr/>

            <div class="row justify-content-end">
                <div class="col-md-2">
                    <button class="btn btn-block btn-dark" type="submit">
                        <i class="fas fa-plus"></i><span>Add AssetType</span></button>
                </div>
            </div>

        </form>
    </div>
</div>

<script>
    // Passing data from flask to javascript

    let dataTypes = JSON.parse('{{ data_types|tojson }}');
    let assetTypes = JSON.parse('{{ asset_types|tojson }}');

</script>

<script src="/static/jscript/createAssetType.js">

</script>
{% endblock %}