{% macro layout_generator(asset_type, page_layout) %}

<script>

    // Import Requirements
    const {Observable} = rxjs;

    const asset_type = JSON.parse('{{ asset_type.as_dict()|tojson }}');
    const sources = JSON.parse('{{ page_layout.sources }}')

    if (sources) {

        let item_count;
        let received_items = 0;

    }

</script>

<!--
The PageLayouts layout parameter, is filled with a list
of rows. Each row is a list of columns. For each column
we create a divider with bootstrap class column. This
column serves as a container. The plugin_macro method,
which creates this macros contents, can append content
to this container.
-->

{% for row_info in page_layout.layout %}
<div class="row" id="row-{{ loop.index }}">

    {% for column_info in row_info %}

    {% set column_id = column_info.column_id %}
    {% set column_width = column_info.column_width %}
    {% set plugin_path = column_info.plugin.path %}

    {# Defining a column div, that the plugin macro can append to. #}

    <div class="col-md-{{ column_width }}" id="column-{{ column_id }}"></div>

    {% from plugin_path import plugin_macro %}
    {{ plugin_macro(asset_type, column_info) }}

    {% endfor %}

</div>
{% endfor %}
{% endmacro %}